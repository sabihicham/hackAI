<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="style.css">
<title>Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ â€” ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
</head>
<body>

  <style>
    /* ---------- Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø© ---------- */
:root{
  --bg: #0b0f12;
  --card: rgba(255,255,255,0.06);
  --accent: #b388ff;    /* purple-gold accent */
  --accent-2: #ffd28a;
  --muted: rgba(255,255,255,0.7);
  --glass-blur: 12px;
  --radius: 14px;
}

/* ØªÙ‡ÙŠØ¦Ø© Ø¹Ø§Ù…Ø© */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:"Inter", "Segoe UI", Tahoma, sans-serif;background:linear-gradient(135deg,#0b0f12 0%, #0e1720 100%);color:#fff}
.topbar{
  height:64px;display:flex;align-items:center;justify-content:space-between;padding:10px 20px;
  backdrop-filter: blur(var(--glass-blur));
}
.topbar .brand{font-weight:700;letter-spacing:0.4px}
.topbar .controls{display:flex;align-items:center;gap:10px}
.topbar select{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.03);color:#fff}
.btn{background:var(--accent);color:#081226;border:none;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600}
.btn.outline{background:transparent;border:1px solid rgba(255,255,255,0.08);color:#fff}
.btn.small{padding:6px 8px;font-size:13px}
.lbl{font-size:14px;margin-left:6px}

/* ---------- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© - layout ---------- */
.container{display:grid;grid-template-columns: 1fr 320px;gap:20px;padding:20px;align-items:start}
.left{display:flex;flex-direction:column;gap:12px}
.right{display:flex;flex-direction:column;gap:12px}

/* ---------- chat box Ø¹Ø§Ù… ---------- */
.chat-box{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:var(--radius);
  padding:18px;
  box-shadow: 0 8px 40px rgba(2,6,23,0.6);
  min-height:520px;
  display:flex;flex-direction:column;gap:12px;
}

/* messages area */
.messages{flex:1;overflow:auto;padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));display:flex;flex-direction:column;gap:8px}

/* message bubble - base */
.msg{position:relative;max-width:86%;padding:10px;border-radius:12px;word-break:break-word;box-shadow: 0 6px 18px rgba(2,6,23,0.6)}
.msg .copyBtn{position:absolute;left:8px;top:8px;border:none;background:rgba(255,255,255,0.06);color:#fff;padding:4px 8px;border-radius:8px;cursor:pointer;font-size:12px}
.msg .copyBtn:active{transform:scale(0.98)}

/* user vs bot */
.msg.user{align-self:flex-end;background:linear-gradient(180deg,#2a6cff,#1b4fd8);color:#fff}
.msg.bot{align-self:flex-start;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));color:var(--muted)}

/* typing placeholder */
.msg.typing{opacity:0.8;font-style:italic}

/* generated image preview */
.generated{width:100%;border-radius:10px;object-fit:cover;margin-top:8px}

/* composer area */
.composer{display:flex;flex-direction:column;gap:8px}
.composer textarea{width:100%;resize:none;border-radius:10px;padding:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff;min-height:64px}
.composer-actions{display:flex;justify-content:flex-end}

/* extras */
.extras{margin-top:6px;display:flex;flex-direction:column;gap:8px}
.extras input{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff}
.extras-actions{display:flex;gap:8px;align-items:center}
.extras .hidden{display:none}

/* right column cards */
.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:10px}
.card.info p{margin:6px 0;color:var(--muted)}
.avatarWrap{display:flex;justify-content:center;margin-bottom:8px}
.avatarWrap svg{width:120px;height:120px;border-radius:60px;box-shadow: 0 8px 24px rgba(0,0,0,0.6)}
.avatarCard h4{margin:6px 0}
.muted{color:var(--muted);font-size:13px}

/* small helpers */
.hidden{display:none}

/* ---------- Dark Elegant specifics (default) ---------- */
body[data-theme="dark-elegant"]{
  --bg: linear-gradient(135deg,#05060a,#0d0f16);
  background: var(--bg);
}
body[data-theme="dark-elegant"] .chat-box{
  background: rgba(255,255,255,0.025);
  border: 1px solid rgba(255,255,255,0.03);
  backdrop-filter: blur(var(--glass-blur));
}
body[data-theme="dark-elegant"] .msg.bot{background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); color: #e6eef8}
body[data-theme="dark-elegant"] .msg.user{background: linear-gradient(90deg,#ffdb6b,#ff9a9e);color:#08060a}

/* ---------- Modern Card layout (7) ---------- */
body[data-theme="modern-card"]{
  background: linear-gradient(180deg,#0b1220 0%, #06111a 100%);
}
body[data-theme="modern-card"] .chat-box{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
  border-radius:18px;padding:20px;border:1px solid rgba(255,255,255,0.03);
}
body[data-theme="modern-card"] .messages{gap:14px}
body[data-theme="modern-card"] .msg{border-radius:16px;padding:14px;box-shadow: 0 8px 30px rgba(2,6,23,0.6)}
body[data-theme="modern-card"] .msg.bot{background:#0f1720;color:var(--muted)}
body[data-theme="modern-card"] .msg.user{background:linear-gradient(90deg,#2e8bff,#0066ff);color:#fff;}

/* Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨Ø´ÙƒÙ„ Ø£ÙƒØ¨Ø± */
body[data-theme="modern-card"] .right{position:sticky;top:20px}

/* ---------- Anime / Avatar (8) ---------- */
body[data-theme="anime-avatar"]{ background: linear-gradient(135deg,#f6d365 0%, #fda085 100%); color:#3b2f2f }
body[data-theme="anime-avatar"] .chat-box{ background: rgba(255,255,255,0.85); color:#2b2b2b }
body[data-theme="anime-avatar"] .msg.bot{background: #fff7ec;color:#333;border:1px solid rgba(0,0,0,0.04)}
body[data-theme="anime-avatar"] .msg.user{background:linear-gradient(90deg,#ffd1f0,#ffa6d8);color:#2b2b2b}
body[data-theme="anime-avatar"] .avatarWrap svg{filter: drop-shadow(0 12px 30px rgba(0,0,0,0.15));}

/* Ø¹Ù†Ø¯ Ø«ÙŠÙ… Ø§Ù„Ø§ÙØ§ØªØ§Ø±: Ø¥Ø¸Ù‡Ø§Ø± Ø§ÙØ§ØªØ§Ø± Ø¨Ø¬Ø§Ù†Ø¨ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¨ÙˆØª */
body[data-theme="anime-avatar"] .msg.with-avatar{
  display:flex;align-items:flex-start;gap:12px;padding:8px;
}
body[data-theme="anime-avatar"] .msg.with-avatar .msg-content{flex:1}
body[data-theme="anime-avatar"] .msg.with-avatar::before{
  content: "";
  width:44px;height:44px;border-radius:22px;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  display:block;margin-inline-start:6px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}

/* ---------- responsive ---------- */
@media (max-width: 900px){
  .container{grid-template-columns: 1fr; padding:12px}
  .right{order:2}
  .topbar .controls{gap:6px}
}

/* ---------- small polish ---------- */
.msg.user{animation: pop .18s ease}
@keyframes pop{from{transform:translateY(6px) scale(.995);opacity:.0}to{transform:none;opacity:1}}

.avatar-selector{
  display:flex;
  gap:10px;
  margin-bottom:12px;
  justify-content:center;
}

.avatar{
  width:45px;
  height:45px;
  border-radius:50%;
  cursor:pointer;
  transition:transform .2s, border .3s;
  border:2px solid transparent;
}

.avatar:hover{
  transform:scale(1.15);
  border-color:#4caf50;
}

.msg.user::before,
.msg.bot::before{
  content:"";
  width:35px;
  height:35px;
  border-radius:50%;
  background-size:cover;
  background-position:center;
  flex-shrink:0;
}

.msg{
  display:flex;
  align-items:flex-start;
  gap:10px;
  margin:6px 0;
  background:#ffffff12;
  padding:8px 12px;
  border-radius:10px;
  max-width:80%;
}

.msg.user{
  align-self:flex-end;
  background:#2196f328;
}

.msg.bot{
  align-self:flex-start;
  background:#44444430;
}

  </style>

<!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø©: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø«ÙŠÙ… -->
<header class="topbar">
  <div class="brand">ğŸ¤– AI Lab</div>

  <div class="controls">
    <label for="themeSelect" class="lbl">Ø§Ø®ØªØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©:</label>
    <select id="themeSelect" aria-label="Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©">
      <option value="dark-elegant">4 â€” Dark Elegant</option>
      <option value="modern-card">7 â€” Modern Card</option>
      <option value="anime-avatar">8 â€” Anime / Avatar</option>
    </select>

    <button id="toggleTheme" class="btn small">ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ</button>
  </div>
</header>

<!-- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<main class="container">
  <section class="left">
    <div class="chat-box" id="chatBox">
      <div class="avatar-selector">
  <img class="avatar" src="https://i.ibb.co/5sJcJcv/a1.png" onclick="setAvatar(this.src)">
  <img class="avatar" src="https://i.ibb.co/GVPHqvF/a2.png" onclick="setAvatar(this.src)">
  <img class="avatar" src="https://i.ibb.co/NLwB3P4/a3.png" onclick="setAvatar(this.src)">
  <img class="avatar" src="https://i.ibb.co/smqYz6p/a4.png" onclick="setAvatar(this.src)">
  <img class="avatar" src="https://i.ibb.co/7vwZ28J/a5.png" onclick="setAvatar(this.src)">
</div>

      <div id="messages" class="messages" aria-live="polite"></div>

      <div class="composer">
        <textarea id="input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." rows="2"></textarea>

        <div class="composer-actions">
          <button id="sendBtn" class="btn">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
      </div>

      <div class="extras">
        <input id="prompt" placeholder="ÙˆØµÙ Ø§Ù„ØµÙˆØ±Ø©..." />
        <div class="extras-actions">
          <button id="genBtn" class="btn outline">ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© ğŸ¨</button>
          <a id="downloadBtn" href="#" download="generated.png" class="btn hidden">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© â¬‡ï¸</a>
        </div>
        <img id="out" class="generated hidden" alt="Generated image preview"/>
      </div>
    </div>
  </section>

  <!-- ÙŠÙ…ÙŠÙ†: Ù„ÙˆØ­Ø© Ø¬Ø§Ù†Ø¨ÙŠØ© ØµØºÙŠØ±Ø© (Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª / Ø§ÙØ§ØªØ§Ø± / Ù…Ø¹Ù„ÙˆÙ…Ø§Øª) -->
  <aside class="right">
    <div class="card info">
      <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h4>
      <p>ÙˆØ§Ø¬Ù‡Ø© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø«ÙŠÙ…Ø§Øª: Dark Elegant â€” Modern Card â€” Anime Avatar.</p>
      <p>Ø§Ø¶ØºØ· Enter Ù„Ø¥Ø±Ø³Ø§Ù„. Ø§Ø³ØªØ®Ø¯Ù… Shift+Enter Ù„Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯.</p>
    </div>

    <div class="card avatarCard" id="avatarCard">
      <!-- ØµÙˆØ±Ø© Ø§Ù„Ø§ÙØ§ØªØ§Ø± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø«Ù…Ø§Ù†ÙŠØ©: Ø§ÙØªØ±Ø§Ø¶ÙŠØ© svg Ù…Ø¶Ù…Ù†Ø© -->
      <div class="avatarWrap">
        <!-- SVG Ø§ÙØ§ØªØ§Ø± Ø¨Ø³ÙŠØ· Ù…Ø¯Ù…Ø¬ -->
        <svg id="avatarSvg" width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0" stop-color="#ff9a9e"/>
              <stop offset="1" stop-color="#fad0c4"/>
            </linearGradient>
          </defs>
          <circle cx="60" cy="60" r="56" fill="url(#g1)"/>
          <g transform="translate(20,28)" fill="#fff">
            <circle cx="20" cy="20" r="12"/>
            <rect x="6" y="46" width="68" height="26" rx="12"/>
          </g>
        </svg>
      </div>
      <h4>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø£ÙˆÙ…ÙŠ</h4>
      <p class="muted">Ø±ÙˆØ¨ÙˆØª ÙˆØ¯ÙˆØ¯ØŒ ÙŠØ³ØªØ·ÙŠØ¹ ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ± ÙˆØ§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.</p>
      <button id="avatarTalk" class="btn small">Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø£ÙØ§ØªØ§Ø± ÙŠØªÙƒÙ„Ù…</button>
    </div>

    <div class="card historyCard">
      <h4>Ø®ÙŠØ§Ø±Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h4>
      <button class="btn small" id="clearChat">Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</button>
      <button class="btn small outline" id="saveTheme">Ø­ÙØ¸ Ø§Ù„Ø«ÙŠÙ…</button>
    </div>
  </aside>
</main>

<!-- ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± (Ø¶Ø¹ Ù…Ù„Ù notify.mp3 Ø¨Ø¬Ø§Ù†Ø¨ index.html Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡) -->
<audio id="notify" src="notify.mp3" preload="auto"></audio>

<script>
/* ======= Ø¹Ù†Ø§ØµØ± DOM ======= */
const messages = document.getElementById('messages');
const input = document.getElementById('input');
const sendBtn = document.getElementById('sendBtn');
const genBtn = document.getElementById('genBtn');
const promptInput = document.getElementById('prompt');
const outImg = document.getElementById('out');
const downloadBtn = document.getElementById('downloadBtn');
const notify = document.getElementById('notify');
const toggleThemeBtn = document.getElementById('toggleTheme');
const themeSelect = document.getElementById('themeSelect');
const avatarTalk = document.getElementById('avatarTalk');
const clearChat = document.getElementById('clearChat');
const saveTheme = document.getElementById('saveTheme');

/* ======= ØªÙ…ÙƒÙŠÙ† Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ (Ø¯Ø§Ù„Ø©) ======= */
function enableCopyButtons() {
  document.querySelectorAll('.copyBtn').forEach(btn=>{
    btn.onclick = async () => {
      const textNode = btn.closest('.msg').querySelector('.msg-content');
      const txt = textNode ? textNode.innerText : btn.closest('.msg').innerText;
      try {
        await navigator.clipboard.writeText(txt.trim());
        btn.textContent = 'âœ…';
        setTimeout(()=> btn.textContent = 'Ù†Ø³Ø®', 700);
      } catch(e) { console.warn(e); }
    };
  });
}

/* ======= append message (with variations for themes) ======= */
function appendMessage(text, role='bot', options={}) {
  // options: {typing:bool, withAvatar:bool}
  const msg = document.createElement('div');
  msg.className = `msg ${role}` + (options.typing ? ' typing' : '');
  // content wrapper
  const wrap = document.createElement('div');
  wrap.className = 'msg-content';
  wrap.textContent = text;
  msg.appendChild(wrap);

  // copy button
  const copy = document.createElement('button');
  copy.className = 'copyBtn';
  copy.type = 'button';
  copy.innerText = 'Ù†Ø³Ø®';
  msg.appendChild(copy);

  // if anime-avatar theme and bot message -> include avatar marker
  if(document.body.dataset.theme === 'anime-avatar' && role === 'bot') {
    msg.classList.add('with-avatar');
    // small avatar thumb (CSS handles display)
  }

  messages.appendChild(msg);
  messages.scrollTop = messages.scrollHeight;
  enableCopyButtons();
}

/* ======= Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ© ======= */
async function sendMessage(){
  const text = input.value.trim();
  if(!text) return;
  appendMessage(text, 'user');
  input.value = '';

  // show typing
  appendMessage('â³ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ ÙŠÙƒØªØ¨...', 'bot', {typing:true});
  // Ø·Ù„Ø¨ Ù„Ù„Ø®Ø§Ø¯Ù…
  try {
    const res = await fetch('/api/chat', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({message: text})
    });
    const j = await res.json();
    // remove typing elements
    document.querySelectorAll('.typing').forEach(n=>n.remove());

    appendMessage(j.reply || 'Ù„Ù… Ø£ØªÙ„Ù‚ Ø±Ø¯Ø§Ù‹', 'bot');
    try { notify.play(); } catch(e){/*autoplay may be blocked*/}

  } catch (e) {
    document.querySelectorAll('.typing').forEach(n=>n.remove());
    appendMessage('âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„.', 'bot');
    console.error(e);
  }
}

/* ======= ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© ======= */
async function generateImage(){
  const text = promptInput.value.trim();
  if(!text) return;
  promptInput.value = '';
  // indicate progress
  genBtn.disabled = true;
  genBtn.textContent = '... Ø¬Ø§Ø±Ù Ø§Ù„ØªÙˆÙ„ÙŠØ¯';
  try {
    const res = await fetch('/api/generate-image', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({prompt: text})
    });
    const j = await res.json();
    outImg.src = j.image;
    outImg.classList.remove('hidden');
    downloadBtn.href = j.image;
    downloadBtn.classList.remove('hidden');
  } catch(e) {
    appendMessage('âš ï¸ ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØµÙˆØ±Ø©', 'bot');
    console.error(e);
  } finally {
    genBtn.disabled = false;
    genBtn.textContent = 'ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© ğŸ¨';
  }
}

/* ======= Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ± (Enter) Ù…Ø¹ Ø¯Ø¹Ù… Shift+Enter ======= */
input.addEventListener('keydown', (ev)=>{
  if(ev.key === 'Enter' && !ev.shiftKey) {
    ev.preventDefault();
    sendMessage();
  }
});

/* ======= Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ======= */
sendBtn.addEventListener('click', sendMessage);
genBtn.addEventListener('click', generateImage);
clearChat.addEventListener('click', ()=>{ messages.innerHTML=''; });
avatarTalk.addEventListener('click', ()=> {
  appendMessage('Ù‡Ø§ÙŠ! Ø£Ù†Ø§ Ø£ÙˆÙ…ÙŠ ğŸ˜Š ÙƒÙŠÙ Ø£Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ', 'bot');
  try { notify.play(); } catch(e){}
});

/* ======= Theme switching ======= */
function applyTheme(name){
  document.body.dataset.theme = name;
  themeSelect.value = name;
  // set toggle text based on dark-like themes
  toggleThemeBtn.textContent = name === 'modern-card' ? 'ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ' :
                               document.body.classList.contains('dark') ? 'â˜€ï¸ ÙˆØ¶Ø¹ Ù†Ù‡Ø§Ø±ÙŠ' : 'ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ';
  // store preference
  localStorage.setItem('preferredTheme', name);
}
themeSelect.addEventListener('change', ()=> applyTheme(themeSelect.value));

toggleThemeBtn.addEventListener('click', ()=>{
  document.body.classList.toggle('dark');
  toggleThemeBtn.textContent = document.body.classList.contains('dark') ? 'â˜€ï¸ ÙˆØ¶Ø¹ Ù†Ù‡Ø§Ø±ÙŠ' : 'ğŸŒ™ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ';
});

/* Ø­ÙØ¸ Ø§Ù„Ø«ÙŠÙ… ÙŠØ¯ÙˆÙŠØ§Ù‹ */
saveTheme.addEventListener('click', ()=> {
  localStorage.setItem('preferredTheme', document.body.dataset.theme || 'dark-elegant');
  alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø«ÙŠÙ…');
});

/* load saved theme on start */
(function init(){
  const pref = localStorage.getItem('preferredTheme') || 'dark-elegant';
  applyTheme(pref);
})();

let currentAvatar = "https://i.ibb.co/5sJcJcv/a1.png";

function setAvatar(src){
  currentAvatar = src;
}

function append(text, cls){
  messages.innerHTML += `
  <div class="msg ${cls}" style="--avatar:url('${currentAvatar}')">
    <div class="avatar-bubble" style="background-image:url('${currentAvatar}')"></div>
    <span>${text}</span>
  </div>`;
  messages.scrollTop = messages.scrollHeight;
}

</script>
</body>
</html>
